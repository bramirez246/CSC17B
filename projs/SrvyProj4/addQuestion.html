<!DOCTYPE html>
<html>
    <head>
        <title>New Survey</title>
        <link rel="stylesheet" href="style.css">
        <script src="clearStorage.js"></script>
        <script src="Survey.js"></script>
    </head>
    
    <body>
        <ul id="topnav">
            <li><a href="main.html">Home</a></li>
        </ul>
        
        <div id="main">
            <h1 id="title">New Survey</h1>
            <form action="getNewQuestionForm.html" method="get" id="form">
                Survey Name: 
                <br><input type="text" name="name" required><br><br>
                Description: 
                <br><input type="text" name="description" required><br><br>
                Identifier: 
                <br><input type="text" name="identifier" required><br><br>
                Question: 
                <br><input type="text" name="question" required><br><br>
                Answers (enter at least two answer options): 
                <br>1. <input type="text" name="answer1" required>
                <br>2. <input type="text" name="answer2" required>
                <br>3. <input type="text" name="answer3">
                <br>4. <input type="text" name="answer4">
                <br>5. <input type="text" name="answer5"><br>
                <br><input type="submit" name="submit">
            </form>
        </div>
        
        <script>
            // check if survey object exist in local storage
            if('survey' in localStorage){
                // reconstruct the survey object from local storage
                var newSurvey = new Survey();
                newSurvey.reconstSurvey();
                
                document.title = "Add Question - " + newSurvey.name;
                
                // change the title of this web page
                document.getElementById("title").innerHTML="Add Question";
                
                // remove the "survey name" and "description" form
                var node = document.getElementById('form');
                for(var i = 0; i < 10; i++){
                    node.removeChild(node.firstChild);
                }
                
                // Add the menu options
                document.getElementById("topnav").innerHTML+='<li><a href="addQuestion.html" class="active">Add Question</a></li>';
                document.getElementById("topnav").innerHTML+='<li><a href="result.html">Result</a></li>';
                document.getElementById("topnav").innerHTML+='<li><a href="main.html" onclick="clearStorage()" class="right">Clear Survey</a></li>';
            }
            else{
                // Add the "New Survey" option
                document.getElementById("topnav").innerHTML+='<li><a href="addQuestion.html" class="active">New Survey</a></li>';
            }
        </script>
    </body>
</html>